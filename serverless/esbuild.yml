esbuild:
  bundle: true
  minify: ${self:custom.minify.${sls:stage}, true}
  sourcemap: ${self:custom.sourcemap.${sls:stage}, false}
  target: node20
  platform: node
  exclude:
    - "@aws-sdk/*"
    - sharp
  define:
    "require.resolve": undefined
  watch:
    pattern:
      - "src/**/*.ts"
    ignore:
      - "node_modules/**"
      - ".build/**"
      - ".serverless/**"

sourcemap:
  dev: false # true
  prod: false

minify:
  dev: true # false
  prod: true
